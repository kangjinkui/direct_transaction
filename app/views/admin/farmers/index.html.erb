<div class="flex items-center justify-between mb-4">
  <h1 class="text-2xl font-semibold">농가 관리</h1>
  <%= link_to "농가 추가", new_admin_farmer_path, class: "bg-blue-600 text-white px-4 py-2 rounded text-sm" %>
</div>

<% if @farmers.empty? %>
  <p class="text-gray-600">등록된 농가가 없습니다.</p>
<% else %>
  <table class="min-w-full border border-gray-200 text-sm bg-white">
    <thead>
      <tr class="bg-gray-50 text-left">
        <th class="px-3 py-2 border">상호</th>
        <th class="px-3 py-2 border">대표자</th>
        <th class="px-3 py-2 border">연락처</th>
        <th class="px-3 py-2 border">재고</th>
        <th class="px-3 py-2 border">알림 방식</th>
        <th class="px-3 py-2 border">승인 방식</th>
        <th class="px-3 py-2 border">계좌</th>
        <th class="px-3 py-2 border">관리</th>
      </tr>
    </thead>
    <tbody>
      <% @farmers.each do |farmer| %>
        <tr>
          <td class="px-3 py-2 border font-medium"><%= farmer.business_name %></td>
          <td class="px-3 py-2 border"><%= farmer.owner_name %></td>
          <td class="px-3 py-2 border"><%= farmer.phone %></td>
          <td class="px-3 py-2 border"><%= farmer.stock_quantity %></td>
          <td class="px-3 py-2 border"><%= farmer.notification_method %></td>
          <td class="px-3 py-2 border"><%= farmer.approval_mode %></td>
          <td class="px-3 py-2 border">
            <div class="text-sm"><%= farmer.masked_account_info.presence || "-" %></div>
            <%= link_to "전체 보기",
                        account_info_admin_farmer_path(farmer),
                        data: { turbo_frame: "account_info_modal" },
                        class: "text-xs text-blue-600 hover:underline" %>
          </td>
          <td class="px-3 py-2 border space-x-2 whitespace-nowrap">
            <%= link_to "보기", admin_farmer_path(farmer), class: "text-blue-600 hover:underline text-sm" %>
            <%= link_to "수정", edit_admin_farmer_path(farmer), class: "text-blue-600 hover:underline text-sm" %>
            <%= link_to "삭제",
                        admin_farmer_path(farmer),
                        data: { turbo_method: :delete, turbo_confirm: "정말 삭제할까요?" },
                        class: "text-red-600 hover:underline text-sm" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<turbo-frame id="account_info_modal"></turbo-frame>
