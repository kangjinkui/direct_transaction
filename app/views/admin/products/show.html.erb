<div class="flex items-center justify-between mb-4">
  <h1 class="text-2xl font-semibold"><%= @product.name %></h1>
  <div class="space-x-2">
    <%= link_to "목록", admin_products_path, class: "text-sm text-gray-700 hover:underline" %>
    <%= link_to "수정", edit_admin_product_path(@product), class: "text-sm text-blue-600 hover:underline" %>
  </div>
</div>

<div class="bg-white border border-gray-200 rounded p-4 space-y-3 text-sm">
  <div>
    <strong class="text-gray-600">농가</strong>
    <div><%= @product.farmer&.business_name || "-" %></div>
  </div>
  <div>
    <strong class="text-gray-600">가격</strong>
    <div><%= number_to_currency(@product.price, unit: "₩", precision: 0) %></div>
  </div>
  <div>
    <strong class="text-gray-600">카테고리</strong>
    <div><%= @product.category %></div>
  </div>
  <div>
    <strong class="text-gray-600">재고</strong>
    <div><%= @product.stock_quantity %> (<%= @product.stock_status %>)</div>
  </div>
  <div>
    <strong class="text-gray-600">1회 최대 주문수량</strong>
    <div><%= @product.max_per_order %></div>
  </div>
  <div>
    <strong class="text-gray-600">SKU</strong>
    <div class="font-mono"><%= @product.sku %></div>
  </div>
  <div>
    <strong class="text-gray-600">설명</strong>
    <p class="mt-1 whitespace-pre-line"><%= @product.description %></p>
  </div>
  <div>
    <strong class="text-gray-600">판매 상태</strong>
    <div><%= @product.is_available? ? "판매중" : "중지" %></div>
  </div>
</div>

<div class="mt-6">
  <%= form_with(model: [:admin, @product],
                url: update_stock_admin_product_path(@product),
                method: :patch,
                local: true,
                class: "flex flex-col gap-2 md:flex-row md:items-end") do |f| %>
    <div>
      <%= f.label :stock_quantity, "재고 수량", class: "block text-sm font-medium text-gray-700" %>
      <%= f.number_field :stock_quantity, class: "mt-1 w-full border rounded px-3 py-2", value: @product.stock_quantity %>
    </div>
    <div>
      <%= f.label :stock_status, "재고 상태", class: "block text-sm font-medium text-gray-700" %>
      <%= f.select :stock_status,
                   Product.stock_statuses.keys.map { |status| [status.humanize, status] },
                   {},
                   class: "mt-1 w-full border rounded px-3 py-2" %>
    </div>
    <div class="pt-6">
      <%= f.submit "재고 수정", class: "bg-gray-800 text-white px-4 py-2 rounded" %>
    </div>
  <% end %>
</div>

<div class="mt-4">
  <%= link_to "삭제",
              admin_product_path(@product),
              data: { turbo_method: :delete, turbo_confirm: "정말 삭제할까요?" },
              class: "text-red-600 hover:underline text-sm" %>
</div>
