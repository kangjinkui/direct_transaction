<%= form_with model: [:farmers, product], class: "space-y-6" do |f| %>
  <% if product.errors.any? %>
    <div class="alert alert-error">
      <h3 class="font-bold">오류가 발생했습니다:</h3>
      <ul class="list-disc list-inside">
        <% product.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="card bg-base-100 shadow-lg">
    <div class="card-body">
      <h2 class="card-title">기본 정보</h2>

      <div class="form-control">
        <%= f.label :name, "상품명", class: "label" %>
        <%= f.text_field :name, class: "input input-bordered", placeholder: "예: 유기농 토마토" %>
      </div>

      <div class="form-control">
        <%= f.label :description, "설명", class: "label" %>
        <%= f.text_area :description, class: "textarea textarea-bordered h-24", placeholder: "상품에 대한 자세한 설명을 입력하세요" %>
      </div>

      <div class="form-control">
        <%= f.label :image_url, "이미지 URL", class: "label" %>
        <%= f.text_field :image_url, class: "input input-bordered", placeholder: "https://example.com/image.jpg" %>
        <label class="label">
          <span class="label-text-alt text-base-content/60">이미지 업로드 기능은 추후 추가 예정입니다</span>
        </label>
      </div>
    </div>
  </div>

  <div class="card bg-base-100 shadow-lg">
    <div class="card-body">
      <h2 class="card-title">가격 및 재고</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control">
          <%= f.label :price, "가격 (원)", class: "label" %>
          <%= f.number_field :price, class: "input input-bordered", placeholder: "10000", min: 0 %>
        </div>

        <div class="form-control">
          <%= f.label :stock_quantity, "재고 수량", class: "label" %>
          <%= f.number_field :stock_quantity, class: "input input-bordered", placeholder: "100", min: 0 %>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control">
          <%= f.label :stock_status, "재고 상태", class: "label" %>
          <%= f.select :stock_status,
                       options_for_select(Product.stock_statuses.keys.map { |s| [s.humanize, s] }, product.stock_status),
                       {},
                       class: "select select-bordered" %>
        </div>

        <div class="form-control">
          <%= f.label :is_available, "판매 여부", class: "label" %>
          <label class="label cursor-pointer justify-start gap-4">
            <%= f.check_box :is_available, class: "checkbox checkbox-primary" %>
            <span class="label-text">판매 중</span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="flex gap-4">
    <%= f.submit product.new_record? ? "상품 등록" : "수정 저장", class: "btn btn-primary" %>
    <%= link_to "취소", farmers_products_path, class: "btn btn-ghost" %>
  </div>
<% end %>
