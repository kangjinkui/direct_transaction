<div class="page-container py-8 space-y-6">
  <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-3xl font-bold">상품 관리</h1>
      <p class="text-sm text-base-content/70">내 농가의 상품을 관리합니다</p>
    </div>
    <div class="flex flex-wrap gap-2">
      <%= link_to "상품 추가", new_farmers_product_path, class: "btn btn-primary btn-sm" %>
      <%= link_to "대시보드", farmers_dashboard_path, class: "btn btn-ghost btn-sm" %>
    </div>
  </div>

  <% if @products.empty? %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body text-center py-12">
        <p class="text-base-content/70 mb-4">등록된 상품이 없습니다.</p>
        <%= link_to "첫 상품 추가하기", new_farmers_product_path, class: "btn btn-primary" %>
      </div>
    </div>
  <% else %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @products.each do |product| %>
        <div class="card bg-base-100 shadow-lg">
          <% if product.image_url.present? %>
            <figure class="h-48">
              <img src="<%= product.image_url %>" alt="<%= product.name %>" class="w-full h-full object-cover">
            </figure>
          <% else %>
            <figure class="h-48 bg-base-200 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-base-content/30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </figure>
          <% end %>

          <div class="card-body">
            <h2 class="card-title">
              <%= product.name %>
              <div class="badge badge-sm <%= product.is_available? ? 'badge-success' : 'badge-ghost' %>">
                <%= product.is_available? ? '판매중' : '중지' %>
              </div>
            </h2>

            <p class="text-sm text-base-content/70 line-clamp-2">
              <%= product.description.presence || "설명 없음" %>
            </p>

            <div class="divider my-2"></div>

            <div class="flex justify-between items-center text-sm">
              <div>
                <p class="text-xs text-base-content/70">가격</p>
                <p class="font-bold text-primary"><%= number_to_currency(product.price, unit: "", precision: 0) %>원</p>
              </div>
              <div>
                <p class="text-xs text-base-content/70">재고</p>
                <p class="font-bold <%= product.stock_quantity > 0 ? 'text-success' : 'text-error' %>">
                  <%= product.stock_quantity %>개
                </p>
              </div>
              <div>
                <span class="badge badge-sm <%= product.stock_status == 'available' ? 'badge-success' : 'badge-error' %>">
                  <%= product.stock_status %>
                </span>
              </div>
            </div>

            <div class="card-actions justify-end mt-4">
              <%= link_to "수정", edit_farmers_product_path(product), class: "btn btn-primary btn-sm" %>
              <%= button_to "삭제", farmers_product_path(product), method: :delete, form: { data: { turbo_confirm: "정말 삭제하시겠습니까?" } }, class: "btn btn-error btn-sm" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
